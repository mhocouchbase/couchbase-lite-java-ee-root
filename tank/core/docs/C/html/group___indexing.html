<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LiteCore: Database Indexes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LiteCore
   </div>
   <div id="projectbrief">Couchbase Lite cross-platform core implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Database Indexes</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_c4_index_options.html">C4IndexOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options for indexes; these each apply to specific types of indexes.  <a href="struct_c4_index_options.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaf0b8613e821a59cfdea501bec2d661cb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a> : uint32_t { <a class="el" href="group___indexing.html#ggaf0b8613e821a59cfdea501bec2d661cba5766cf8762fa8efe9d8d3a0049a46c8b">kC4ValueIndex</a>, 
<a class="el" href="group___indexing.html#ggaf0b8613e821a59cfdea501bec2d661cba302557d4c038fa656e15540e7d949cf6">kC4FullTextIndex</a>, 
<a class="el" href="group___indexing.html#ggaf0b8613e821a59cfdea501bec2d661cba936875786c2dd3333ab25cbcd8bb9645">kC4GeoIndex</a>
 }<tr class="memdesc:gaf0b8613e821a59cfdea501bec2d661cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of indexes.  <a href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaf0b8613e821a59cfdea501bec2d661cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaa39192a84da11fc888c2946b0621307"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___indexing.html#gaaa39192a84da11fc888c2946b0621307">c4db_createIndex</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a> name, <a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a> expressionsJSON, <a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a> indexType, const <a class="el" href="struct_c4_index_options.html">C4IndexOptions</a> *indexOptions, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:gaaa39192a84da11fc888c2946b0621307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a database index, of the values of specific expressions across all documents.  <a href="#gaaa39192a84da11fc888c2946b0621307">More...</a><br /></td></tr>
<tr class="separator:gaaa39192a84da11fc888c2946b0621307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d682cf2d661ec580a7a901b5f612015"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___indexing.html#ga1d682cf2d661ec580a7a901b5f612015">c4db_deleteIndex</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a> name, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga1d682cf2d661ec580a7a901b5f612015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes an index that was created by <code>c4db_createIndex</code>.  <a href="#ga1d682cf2d661ec580a7a901b5f612015">More...</a><br /></td></tr>
<tr class="separator:ga1d682cf2d661ec580a7a901b5f612015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18a33298bdaaa05c1c85ac4a6ac37706"><td class="memItemLeft" align="right" valign="top"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___indexing.html#ga18a33298bdaaa05c1c85ac4a6ac37706">c4db_getIndexes</a> (<a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *database, <a class="el" href="struct_c4_error.html">C4Error</a> *outError)</td></tr>
<tr class="memdesc:ga18a33298bdaaa05c1c85ac4a6ac37706"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the names of all indexes in the database.  <a href="#ga18a33298bdaaa05c1c85ac4a6ac37706">More...</a><br /></td></tr>
<tr class="separator:ga18a33298bdaaa05c1c85ac4a6ac37706"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaf0b8613e821a59cfdea501bec2d661cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0b8613e821a59cfdea501bec2d661cb">&sect;&nbsp;</a></span>C4IndexType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a> : uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Types of indexes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf0b8613e821a59cfdea501bec2d661cba5766cf8762fa8efe9d8d3a0049a46c8b"></a>kC4ValueIndex&#160;</td><td class="fielddoc"><p>Regular index of property value. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf0b8613e821a59cfdea501bec2d661cba302557d4c038fa656e15540e7d949cf6"></a>kC4FullTextIndex&#160;</td><td class="fielddoc"><p>Full-text index. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf0b8613e821a59cfdea501bec2d661cba936875786c2dd3333ab25cbcd8bb9645"></a>kC4GeoIndex&#160;</td><td class="fielddoc"><p>Geospatial index of GeoJSON values (NOT YET IMPLEMENTED) </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaaa39192a84da11fc888c2946b0621307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa39192a84da11fc888c2946b0621307">&sect;&nbsp;</a></span>c4db_createIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4db_createIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>expressionsJSON</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___indexing.html#gaf0b8613e821a59cfdea501bec2d661cb">C4IndexType</a>&#160;</td>
          <td class="paramname"><em>indexType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c4_index_options.html">C4IndexOptions</a> *&#160;</td>
          <td class="paramname"><em>indexOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a database index, of the values of specific expressions across all documents. </p>
<p>The name is used to identify the index for later updating or deletion; if an index with the same name already exists, it will be replaced unless it has the exact same expressions.</p>
<p>Currently two types of indexes are supported:</p>
<p>Value indexes speed up queries by making it possible to look up property (or expression) values without scanning every document. They're just like regular indexes in SQL or N1QL. Multiple expressions are supported; the first is the primary key, second is secondary. Expressions must evaluate to scalar types (boolean, number, string). Full-Text Search (FTS) indexes enable fast search of natural-language words or phrases by using the <code>MATCH</code> operator in a query. A FTS index is <b>required</b> for full-text search: a query with a <code>MATCH</code> operator will fail to compile unless there is already a FTS index for the property/expression being matched. Only a single expression is currently allowed, and it must evaluate to a string.</p>
<p>Note: If the value of an expression in some document is missing or an unsupported type, that document will just be omitted from the index. It's not an error.</p>
<p>Expressions are defined in JSON, as in a query, and wrapped in a JSON array. For example, <code>[[".name.first"]]</code> will index on the first-name property. Note the two levels of brackets, since an expression is already an array.</p>
<p>Currently, full-text indexes are limited to a single expression only. Geospatial indexes are not implemented at all yet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>The database to index. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the index. Any existing index with the same name will be replaced, unless it has the identical expressions (in which case this is a no-op.) </td></tr>
    <tr><td class="paramname">expressionsJSON</td><td>A JSON array of one or more expressions to index. Each expression takes the same form as in a query, which means it's a JSON array as well; don't get mixed up by the nesting! </td></tr>
    <tr><td class="paramname">indexType</td><td>The type of index (value or full-text.) </td></tr>
    <tr><td class="paramname">indexOptions</td><td>Options for the index. If NULL, each option will get a default value. </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="ga1d682cf2d661ec580a7a901b5f612015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d682cf2d661ec580a7a901b5f612015">&sect;&nbsp;</a></span>c4db_deleteIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool c4db_deleteIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="c4_base_8h.html#a04de3d84e73df3c8b75092054abcc117">C4String</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes an index that was created by <code>c4db_createIndex</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>The database to index. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the index to delete </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, false on failure. </dd></dl>

</div>
</div>
<a id="ga18a33298bdaaa05c1c85ac4a6ac37706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18a33298bdaaa05c1c85ac4a6ac37706">&sect;&nbsp;</a></span>c4db_getIndexes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="c4_base_8h.html#a888462a5f9574c8b2c90dd55ea7d4af2">C4SliceResult</a> c4db_getIndexes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___database.html#ga15e027d347f40041585744dad4dac1c9">C4Database</a> *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c4_error.html">C4Error</a> *&#160;</td>
          <td class="paramname"><em>outError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the names of all indexes in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>The database to check </td></tr>
    <tr><td class="paramname">outError</td><td>On failure, will be set to the error status. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Fleece-encoded array of strings, or NULL on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
